"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8521],{8521:(V,S,c)=>{c.r(S),c.d(S,{LoginPageModule:()=>q});var D=c(6814),l=c(95),a=c(878),b=c(1147),g=c(5861),u=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(u||{});function O(t,e){return{type:u.Trigger,name:t,definitions:e,options:{}}}function L(t,e=null){return{type:u.Animate,styles:e,timings:t}}function P(t){return{type:u.Style,styles:t,offset:null}}function A(t,e,r){return{type:u.State,name:t,styles:e,options:r}}function N(t,e,r=null){return{type:u.Transition,expr:t,animation:e,options:r}}var J=c(8662),n=c(9212),I=c(7346),R=c(4282),T=c(2014);function x(t,e){if(1&t&&(n.TgZ(0,"ion-select-option",18),n._uU(1),n.qZA()),2&t){const r=e.$implicit;n.Q6J("value",r.id_branch),n.xp6(),n.Oqu(r.name)}}const U=[{path:"",component:(()=>{var t;class e{ngOnInit(){var o=this;return(0,g.Z)(function*(){yield o.storage.create()})()}constructor(o,i,m,d,f,p,h,y){var s=this;this.menu=o,this.builder=i,this.common=m,this.toast=d,this.platform=f,this.load=p,this.storage=h,this.router=y,this.visibleState="visible",this.submitted=!1,this.isDisabled=!1,this.getuserLoginURL="",this.errorMessage="",this.typecheck="password",this.showPass=!1,this.remember=!1,this.currency="",this.branch_name="",this.type="password",this.user={username:""},this.emailChanged=!1,this.submitAttempt=!1,this.animateClass={"zoom-in":!0},this.branches=[],this.class="margin",this.cmpName="",this.deviceid="",this.default_login=!1,this.login={username:"",password:""},this.common.menu_option=!1,this.getDeviceId(),this.loginForm=i.group({username:["",l.kI.compose([l.kI.required,l.kI.minLength(5),l.kI.maxLength(15)])],password:["",l.kI.compose([l.kI.required])],id_branch:["",l.kI.required],remember2:[!1,""],device:this.deviceid.identifier,status:1}),this.username=this.loginForm.controls.username,this.password=this.loginForm.controls.password,this.id_branch=this.loginForm.controls.id_branch,this.remember2=this.loginForm.controls.remember2,this.common.showLoader().then(()=>{this.common.getCusAppVersion().subscribe(function(){var M=(0,g.Z)(function*(_){if(s.branch_settings=_.settings.branch_settings,s.login_branch=_.settings.login_branch,s.maintain_ver=_.maintain_ver,console.log(s.branch_settings),console.log(s.login_branch),s.storage.set("versionData",_),console.log(_),console.log("remem : ",yield s.storage.get("versionData")),1==s.branch_settings&&1==s.login_branch)s.common.getbranch().subscribe(function(){var v=(0,g.Z)(function*(F){F&&F.forEach((B,le)=>{1==B.is_default&&s.branches.push(B)}),s.loginForm.controls.id_branch.setValue(s.branches[0].id_branch);let w=yield s.storage.get("remember2");console.log(w),s.get_login(),1==JSON.parse(w).remember2&&(console.log("trueeeee : "),s.loginForm.controls.remember2.setValue(!0),s.loginForm.controls.username.setValue(s.storage.get(JSON.parse("remember2value").username)),s.loginForm.controls.password.setValue(s.storage.get(JSON.parse("remember2value").password)),s.loginForm.controls.id_branch.setValue(s.storage.get(JSON.parse("remember2value").id_branch)))});return function(F){return v.apply(this,arguments)}}());else{let v=s.storage.get(JSON.parse("remember2"));console.log(v),1==s.remember&&(s.loginForm.controls.remember2.setValue(!0),s.loginForm.controls.username.setValue(s.storage.get(JSON.parse("remember2value").username)),s.loginForm.controls.password.setValue(s.storage.get(JSON.parse("remember2value").password)),s.loginForm.controls.id_branch.setValue(s.login_branch))}});return function(_){return M.apply(this,arguments)}}()),this.common.stopLoader()})}ionViewDidEnter(){this.menu.enable(!1)}ionViewWillLeave(){this.menu.enable(!0)}getDeviceId(){var o=this;return(0,g.Z)(function*(){try{const i=yield J.A.getId();return o.deviceid=i,console.log("Device ID:",o.deviceid.identifier),o.deviceid}catch(i){return console.error("Error retrieving device ID:",i),null}})()}get_login(){return(0,g.Z)(function*(){})()}updateremember2(o){this.loginForm.controls.remember2.setValue(o),console.log(o)}changeType(){this.type=!this.type}get_set(o){this.storage.set("remember2value",JSON.stringify(o))}onSubmit(o){var i=this;return(0,g.Z)(function*(){var d,f;o.device=i.deviceid.identifier,o.app_type=2,console.log(o,"value"),i.submitted=!0,i.loginForm.valid?(i.errorMessage="Logging in...",i.isDisabled=!0,i.common.showLoader(),i.common.doLogin(JSON.stringify(o)).subscribe(function(){var p=(0,g.Z)(function*(h){if(h){if(h.result){if("logged"==h.type){console.log(o),i.storage.set("loginvalue",JSON.stringify(o)),i.storage.set("remember",JSON.stringify(i.remember)),i.storage.set("remember2",JSON.stringify(i.loginForm.value)),yield i.storage.set("remember2value",JSON.stringify(o)),i.storage.set("userdet",JSON.stringify(o)),h.empdata.id_branch=JSON.parse(yield i.storage.get("remember2value")).id_branch;let y=i.branches.filter(s=>s.id_branch===h.empdata.id_branch);h.empdata.branch_name=y.length>0?y[0].name:h.empdata.branch_name,console.log(h.empdata),yield i.storage.set("empDetail",JSON.stringify(h.empdata)),localStorage.setItem("empDet",JSON.stringify(h.empdata)),localStorage.setItem("logstatus",JSON.stringify(!0)),i.router.navigate(["/home"])}}else i.errorMessage=h.msg,i.common.presentToast(h.msg),i.isDisabled=!1;i.common.stopLoader()}});return function(h){return p.apply(this,arguments)}}(),p=>{i.isDisabled=!1,i.common.stopLoader()})):null!==(d=i.loginForm.get("username"))&&void 0!==d&&d.valid?null!==(f=i.loginForm.get("password"))&&void 0!==f&&f.valid||(yield i.toast.create({message:"Please Enter Password Minimum 8 & Maximum 16 letters",position:"bottom"})).present():(yield i.toast.create({message:"Please Enter Username Minimum 5 & Maximum 15 letters",position:"bottom"})).present()})()}}return(t=e).\u0275fac=function(o){return new(o||t)(n.Y36(a._q),n.Y36(l.qu),n.Y36(R.l),n.Y36(a.yF),n.Y36(I.t4),n.Y36(a.HT),n.Y36(T.K),n.Y36(b.F0))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-login"]],decls:33,vars:7,consts:[[3,"fullscreen"],[1,"margin",2,"text-align","center","margin-top","25px"],["src","assets/header-final.svg",2,"height","70px"],[1,"theme-color"],[1,"ion-margin",3,"formGroup","ngSubmit"],[1,"ion-margin-vertical"],["lines","full"],["type","text","formControlName","username","label","User Name","labelPlacement","floating","placeholder","User Name","name","username"],["slot","end","color","dark",3,"name","click"],["formControlName","password","label","Password","labelPlacement","floating","placeholder","Enter password",3,"type"],["label","Branch","formControlName","id_branch","labelPlacement","floating"],[3,"value",4,"ngFor","ngForOf"],["col-12","",2,"display","flex","margin-top","8px"],["formControlName","remember2",3,"ionChange"],[2,"font-size","14px","font-weight","normal","color","#222","float","left","margin","auto","margin-left","10px"],["color","secondary","type","submit"],["translucent","true","no-lines","","align","center"],[2,"font-size","smaller","font-weight","bold"],[3,"value"]],template:function(o,i){1&o&&(n.TgZ(0,"ion-content",0)(1,"div",1),n._UZ(2,"img",2),n.TgZ(3,"p",3),n._uU(4),n.qZA()(),n.TgZ(5,"ion-card")(6,"ion-card-header")(7,"form",4),n.NdJ("ngSubmit",function(){return i.onSubmit(i.loginForm.value)}),n.TgZ(8,"div",5)(9,"ion-item",6),n._UZ(10,"ion-input",7),n.qZA()(),n.TgZ(11,"div",5)(12,"ion-item",6)(13,"ion-icon",8),n.NdJ("click",function(){return i.changeType()}),n.qZA(),n._UZ(14,"ion-input",9),n.qZA()(),n.TgZ(15,"ion-item")(16,"ion-select",10),n.YNc(17,x,2,2,"ion-select-option",11),n.qZA()(),n.TgZ(18,"ion-row")(19,"ion-col",12)(20,"ion-checkbox",13),n.NdJ("ionChange",function(){return i.updateremember2(i.remember2.value)}),n.qZA(),n.TgZ(21,"span",14),n._uU(22,"Remember me"),n.qZA()()(),n.TgZ(23,"ion-row"),n._UZ(24,"ion-col"),n.TgZ(25,"ion-col")(26,"ion-button",15),n._uU(27,"Login"),n.qZA()(),n._UZ(28,"ion-col"),n.qZA()()()()(),n.TgZ(29,"ion-footer",16)(30,"ion-toolbar")(31,"ion-title",17),n._uU(32),n.qZA()()()),2&o&&(n.Q6J("fullscreen",!0),n.xp6(4),n.Oqu(i.cmpName),n.xp6(3),n.Q6J("formGroup",i.loginForm),n.xp6(6),n.Q6J("name",i.type?"eye":"eye-off"),n.xp6(),n.Q6J("type",i.type?"password":"text"),n.xp6(3),n.Q6J("ngForOf",i.branches),n.xp6(15),n.hij("Current Version (",i.maintain_ver,")"))},dependencies:[D.sg,l._Y,l.JJ,l.JL,l.sg,l.u,a.YG,a.PM,a.Zi,a.nz,a.wI,a.W2,a.fr,a.gu,a.pK,a.Ie,a.Nd,a.t9,a.n0,a.wd,a.sr,a.w,a.QI,a.j9],styles:["ion-input[_ngcontent-%COMP%], ion-text[_ngcontent-%COMP%]{font-size:.9rem}.error[_ngcontent-%COMP%]{font-size:.7rem!important}p[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.8rem;margin:1vh 2vh}ion-button[_ngcontent-%COMP%]{margin:5vh 0}"],data:{animation:[O("myvisibility",[A("visible",P({opacity:1})),A("invisible",P({opacity:0})),N("* => *",L(".5s"))])]}}),e})()}];let k=(()=>{var t;class e{}return(t=e).\u0275fac=function(o){return new(o||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[b.Bz.forChild(U),b.Bz]}),e})(),q=(()=>{var t;class e{}return(t=e).\u0275fac=function(o){return new(o||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[D.ez,l.u5,l.UX,a.Pc,k]}),e})()}}]);